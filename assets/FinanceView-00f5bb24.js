import{g as M,h as L,c as F,a,b as t,t as o,u as d,F as v,r as p,w as u,v as y,j as _,i as T,o as i,n as U,l as B,e as $}from"./index-5ced725b.js";const z={class:"page-content"},E={class:"stats-grid"},K={class:"stat-card stat-success"},Q={class:"stat-content"},X={class:"stat-value"},j={class:"stat-card stat-danger"},A={class:"stat-content"},O={class:"stat-value"},q={class:"stat-card stat-info"},G={class:"stat-content"},H={class:"stat-value"},J={class:"page-actions"},P={class:"card"},R={class:"card-content"},W={class:"table-container"},Y={class:"data-table"},Z=["onClick"],tt={key:0,class:"modal",style:{display:"flex"}},et={class:"modal-content"},st={class:"modal-header"},nt={class:"modal-body"},ot={class:"form-group"},lt={class:"form-group"},at=["value"],it={key:0,class:"form-group"},dt=["value"],rt={class:"form-group"},vt={__name:"FinanceView",setup(ut){const{transactions:f,stats:c,members:C,getMemberName:k,addTransaction:V,deleteTransaction:D}=$(),m=M(!1),n=L({id:null,date:"",type:"income",category:"",description:"",amount:0,memberId:null}),N=["Quỹ tháng","Tiền phạt","Tài trợ","Khác"],S=["Thuê sân","Nước uống","Dụng cụ","Liên hoan","Khác"],b=F(()=>n.type==="income"?N:S),g=l=>{n.id=null,n.type=l,n.date=new Date().toISOString().split("T")[0],n.amount=0,n.category=b.value[0],n.memberId=null,m.value=!0},h=()=>m.value=!1,x=()=>{V({...n}),h()},I=l=>{confirm("Xóa giao dịch này?")&&D(l)},r=l=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(l),w=l=>l?new Date(l).toLocaleDateString("vi-VN"):"";return(l,e)=>(i(),a("div",z,[t("div",E,[t("div",K,[t("div",Q,[e[6]||(e[6]=t("div",{class:"stat-label"},"Tổng Thu",-1)),t("div",X,o(r(d(c).totalIncome)),1)])]),t("div",j,[t("div",A,[e[7]||(e[7]=t("div",{class:"stat-label"},"Tổng Chi",-1)),t("div",O,o(r(d(c).totalExpense)),1)])]),t("div",q,[t("div",G,[e[8]||(e[8]=t("div",{class:"stat-label"},"Số Dư",-1)),t("div",H,o(r(d(c).balance)),1)])])]),t("div",J,[t("button",{class:"btn btn-success",onClick:e[0]||(e[0]=s=>g("income"))},"Thêm Thu"),t("button",{class:"btn btn-danger",onClick:e[1]||(e[1]=s=>g("expense"))},"Thêm Chi")]),t("div",P,[t("div",R,[t("div",W,[t("table",Y,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"Ngày"),t("th",null,"Loại"),t("th",null,"Mô Tả"),t("th",null,"Thành Viên"),t("th",null,"Số Tiền"),t("th")])],-1)),t("tbody",null,[(i(!0),a(v,null,p(d(f),s=>(i(),a("tr",{key:s.id},[t("td",null,o(w(s.date)),1),t("td",null,[t("span",{class:U(["badge",s.type==="income"?"badge-success":"badge-danger"])},o(s.type==="income"?"Thu":"Chi"),3)]),t("td",null,o(s.category)+" "+o(s.description?"- "+s.description:""),1),t("td",null,o(d(k)(s.memberId)||"-"),1),t("td",{style:B({color:s.type==="income"?"var(--success-500)":"var(--danger-500)"})},o(s.type==="income"?"+":"-")+o(r(s.amount)),5),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:ct=>I(s.id)},"Xóa",8,Z)])]))),128))])])])])]),m.value?(i(),a("div",tt,[t("div",et,[t("div",st,[t("h2",null,o(n.type==="income"?"Thêm Thu":"Thêm Chi"),1),t("button",{class:"modal-close",onClick:h},"x")]),t("div",nt,[t("div",ot,[e[10]||(e[10]=t("label",null,"Ngày",-1)),u(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>n.date=s)},null,512),[[y,n.date]])]),t("div",lt,[e[11]||(e[11]=t("label",null,"Loại",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.category=s)},[(i(!0),a(v,null,p(b.value,s=>(i(),a("option",{value:s,key:s},o(s),9,at))),128))],512),[[_,n.category]])]),n.type==="income"||n.category==="Quỹ tháng"||n.category==="Tiền phạt"?(i(),a("div",it,[e[13]||(e[13]=t("label",null,"Thành Viên",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>n.memberId=s)},[e[12]||(e[12]=t("option",{value:null},"Chọn thành viên",-1)),(i(!0),a(v,null,p(d(C),s=>(i(),a("option",{value:s.id,key:s.id},o(s.name),9,dt))),128))],512),[[_,n.memberId]])])):T("",!0),t("div",rt,[e[14]||(e[14]=t("label",null,"Số Tiền",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>n.amount=s),step:"1000"},null,512),[[y,n.amount]])]),t("div",{class:"form-actions"},[t("button",{class:"btn btn-primary",onClick:x},"Lưu")])])])])):T("",!0)]))}};export{vt as default};
