import{_ as q,g as m,h as L,c as p,q as R,a as o,b as e,f as v,F as C,r as I,w as _,v as h,i as y,B as T,o as l,t as i,n as A}from"./index-5ced725b.js";const B={class:"page-content"},M={class:"card"},G={class:"card-content"},O={class:"page-actions"},X={key:0},j={class:"leave-requests-list"},F={class:"leave-request-header"},J={class:"leave-request-date"},U={class:"leave-request-created"},z={class:"leave-request-body"},E={key:0,style:{"margin-top":"0.5rem"}},K={key:1,class:"empty-state"},P={key:0,class:"modal",style:{display:"flex"}},$={class:"modal-content"},H={class:"modal-body"},Q={class:"form-group"},W=["min"],Y={class:"form-group"},Z={__name:"LeaveRequestView",setup(ee){const{guestMemberId:r}=T(),u=m(!1),d=m([]),a=L({leaveDate:"",reason:""}),f=p(()=>new Date().toISOString().split("T")[0]);R(()=>{b()});const b=()=>{const s=localStorage.getItem("leaveRequests");d.value=s?JSON.parse(s):[]},D=()=>{localStorage.setItem("leaveRequests",JSON.stringify(d.value))},c=p(()=>r.value?d.value.filter(s=>s.memberId===r.value).sort((s,t)=>new Date(t.createdAt)-new Date(s.createdAt)):[]),x=()=>{a.leaveDate="",a.reason="",u.value=!0},g=()=>{u.value=!1},w=()=>{if(!a.leaveDate){alert("Vui lòng chọn ngày nghỉ");return}if(!a.reason||a.reason.trim()===""){alert("Vui lòng nhập lý do");return}if(!r.value){alert("Không tìm thấy thông tin thành viên");return}const s={id:Date.now(),memberId:r.value,leaveDate:a.leaveDate,reason:a.reason.trim(),status:"pending",createdAt:new Date().toISOString(),adminNote:null};d.value.push(s),D(),alert("✅ Đã gửi đơn xin nghỉ thành công!"),g()},N=s=>({pending:"badge-warning",approved:"badge-success",rejected:"badge-danger"})[s]||"badge-info",S=s=>({pending:"Chờ duyệt",approved:"Đã duyệt",rejected:"Từ chối"})[s]||s,k=s=>s?new Date(s).toLocaleDateString("vi-VN"):"",V=s=>s?new Date(s).toLocaleString("vi-VN"):"";return(s,t)=>(l(),o("div",B,[e("div",M,[t[8]||(t[8]=e("div",{class:"card-header"},[e("h2",null,"Xin Nghỉ")],-1)),e("div",G,[e("div",O,[e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=n=>x())},[...t[3]||(t[3]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),v(" Gửi Đơn Xin Nghỉ ",-1)])])]),c.value.length>0?(l(),o("div",X,[t[6]||(t[6]=e("h3",{style:{margin:"2rem 0 1rem"}},"Đơn Xin Nghỉ Của Tôi",-1)),e("div",j,[(l(!0),o(C,null,I(c.value,n=>(l(),o("div",{class:"leave-request-card",key:n.id},[e("div",F,[e("div",null,[e("div",J,i(k(n.leaveDate)),1),e("div",U,"Gửi lúc: "+i(V(n.createdAt)),1)]),e("span",{class:A(["badge",N(n.status)])},i(S(n.status)),3)]),e("div",z,[e("p",null,[t[4]||(t[4]=e("strong",null,"Lý do:",-1)),v(" "+i(n.reason),1)]),n.adminNote?(l(),o("p",E,[t[5]||(t[5]=e("strong",null,"Phản hồi Admin:",-1)),v(" "+i(n.adminNote),1)])):y("",!0)])]))),128))])])):(l(),o("div",K,[...t[7]||(t[7]=[e("p",null,"Chưa có đơn xin nghỉ nào",-1)])]))])]),u.value?(l(),o("div",P,[e("div",$,[e("div",{class:"modal-header"},[t[9]||(t[9]=e("h2",null,"Gửi Đơn Xin Nghỉ",-1)),e("button",{class:"modal-close",onClick:g},"x")]),e("div",H,[e("div",Q,[t[10]||(t[10]=e("label",null,"Ngày Nghỉ",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=n=>a.leaveDate=n),min:f.value},null,8,W),[[h,a.leaveDate]])]),e("div",Y,[t[11]||(t[11]=e("label",null,"Lý Do",-1)),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=n=>a.reason=n),rows:"4",placeholder:"Nhập lý do xin nghỉ"},null,512),[[h,a.reason]])]),e("div",{class:"form-actions"},[e("button",{class:"btn btn-primary",onClick:w},"Gửi Đơn")])])])])):y("",!0)]))}},se=q(Z,[["__scopeId","data-v-6074adbf"]]);export{se as default};
