# â° TÃ­nh NÄƒng Giá» Báº¯t Äáº§u & Theo DÃµi Äi Muá»™n

## ğŸ“‹ Tá»•ng Quan

Há»‡ thá»‘ng Ä‘Ã£ Ä‘Æ°á»£c bá»• sung tÃ­nh nÄƒng **giá» báº¯t Ä‘áº§u tráº­n Ä‘áº¥u** Ä‘á»ƒ theo dÃµi thÃ nh viÃªn **Ä‘i muá»™n** hay **Ä‘Ãºng giá»** khi Ä‘iá»ƒm danh.

---

## âœ¨ TÃ­nh NÄƒng Má»›i

### 1. **Giá» Báº¯t Äáº§u Tráº­n Äáº¥u**
- Admin cÃ³ thá»ƒ thiáº¿t láº­p giá» báº¯t Ä‘áº§u cá»¥ thá»ƒ cho má»—i tráº­n Ä‘áº¥u
- Äá»‹nh dáº¡ng: HH:MM (vÃ­ dá»¥: 19:00, 14:30)
- Hiá»ƒn thá»‹ trÃªn danh sÃ¡ch tráº­n Ä‘áº¥u vá»›i icon ğŸ•

### 2. **Tá»± Äá»™ng TÃ­nh Äi Muá»™n/ÄÃºng Giá»**
- Khi thÃ nh viÃªn quÃ©t QR Ä‘á»ƒ Ä‘iá»ƒm danh, há»‡ thá»‘ng tá»± Ä‘á»™ng:
  - LÆ°u **timestamp** (thá»i gian Ä‘iá»ƒm danh chÃ­nh xÃ¡c)
  - So sÃ¡nh vá»›i **giá» báº¯t Ä‘áº§u** cá»§a tráº­n Ä‘áº¥u
  - ÄÃ¡nh dáº¥u **Ä‘i muá»™n** (â°) hoáº·c **Ä‘Ãºng giá»** (âœ“)

### 3. **Hiá»ƒn Thá»‹ Chi Tiáº¿t**
- Trong danh sÃ¡ch Ä‘iá»ƒm danh cá»§a tráº­n Ä‘áº¥u:
  - Thá»i gian Ä‘iá»ƒm danh (ngÃ y/thÃ¡ng, giá»:phÃºt)
  - Tráº¡ng thÃ¡i: **â° Muá»™n** (mÃ u vÃ ng) hoáº·c **âœ“ ÄÃºng giá»** (mÃ u xanh)

---

## ğŸ”§ CÃ¡ch Sá»­ Dá»¥ng

### **Cho Admin**

#### 1. Táº¡o Tráº­n Äáº¥u Má»›i
```
1. VÃ o menu "Tráº­n Äáº¥u"
2. Click "ThÃªm Tráº­n Äáº¥u"
3. Äiá»n thÃ´ng tin:
   - Loáº¡i tráº­n Ä‘áº¥u
   - NgÃ y
   - â­ Giá» Báº¯t Äáº§u (má»›i!) - VÃ­ dá»¥: 19:00
   - Äá»‘i thá»§
   - Äá»‹a Ä‘iá»ƒm
   - Danh sÃ¡ch Ä‘iá»ƒm danh
4. Click "LÆ°u"
```

#### 2. Sá»­a Tráº­n Äáº¥u
```
1. Click "Sá»­a/Äiá»ƒm danh" trÃªn tráº­n Ä‘áº¥u
2. Cáº­p nháº­t "Giá» Báº¯t Äáº§u" náº¿u cáº§n
3. Click "LÆ°u"
```

#### 3. Xem ThÃ´ng Tin Äiá»ƒm Danh
```
Trong danh sÃ¡ch tráº­n Ä‘áº¥u, má»—i thÃ nh viÃªn cÃ³ máº·t sáº½ hiá»ƒn thá»‹:
- TÃªn thÃ nh viÃªn
- Thá»i gian Ä‘iá»ƒm danh: "11/01, 19:05"
- Tráº¡ng thÃ¡i: "â° Muá»™n" (náº¿u sau 19:00) hoáº·c "âœ“ ÄÃºng giá»" (náº¿u trÆ°á»›c/Ä‘Ãºng 19:00)
```

### **Cho ThÃ nh ViÃªn (Guest)**

#### QuÃ©t QR Äiá»ƒm Danh
```
1. VÃ o menu "Äiá»ƒm Danh"
2. Click "Báº¯t Äáº§u QuÃ©t QR"
3. QuÃ©t mÃ£ QR cá»§a tráº­n Ä‘áº¥u
4. Há»‡ thá»‘ng sáº½ hiá»ƒn thá»‹:
   - "âœ… Äiá»ƒm danh thÃ nh cÃ´ng! (ÄÃºng giá»)" - náº¿u Ä‘áº¿n Ä‘Ãºng giá»
   - "âœ… Äiá»ƒm danh thÃ nh cÃ´ng! (Äi muá»™n)" - náº¿u Ä‘áº¿n muá»™n
```

---

## ğŸ“Š Cáº¥u TrÃºc Dá»¯ Liá»‡u

### **Match Object (Tráº­n Äáº¥u)**
```javascript
{
    id: 1736611200000,
    date: "2026-01-11",
    startTime: "19:00",  // â­ Má»šI
    matchType: "friendly",
    opponent: "Äá»™i ABC",
    location: "SÃ¢n Thá»‘ng Nháº¥t",
    attendance: [
        {
            memberId: 5,
            status: "present",
            timestamp: "2026-01-11T12:05:30.000Z",  // â­ Má»šI
            isLate: true  // â­ Má»šI
        },
        {
            memberId: 7,
            status: "present",
            timestamp: "2026-01-11T11:55:00.000Z",  // â­ Má»šI
            isLate: false  // â­ Má»šI
        }
    ]
}
```

### **Attendance Object (Äiá»ƒm Danh)**
```javascript
{
    memberId: 5,           // ID thÃ nh viÃªn
    status: "present",     // Tráº¡ng thÃ¡i: present/absent
    timestamp: "2026-01-11T12:05:30.000Z",  // Thá»i gian Ä‘iá»ƒm danh (ISO format)
    isLate: true          // true = Ä‘i muá»™n, false = Ä‘Ãºng giá»
}
```

---

## ğŸ”„ Logic TÃ­nh Äi Muá»™n

### **CÃ´ng Thá»©c**
```javascript
// 1. Láº¥y giá» báº¯t Ä‘áº§u tá»« tráº­n Ä‘áº¥u
const [hours, minutes] = match.startTime.split(':').map(Number);

// 2. Táº¡o DateTime cho giá» báº¯t Ä‘áº§u
const matchStartDateTime = new Date(match.date);
matchStartDateTime.setHours(hours, minutes, 0, 0);

// 3. Láº¥y thá»i gian Ä‘iá»ƒm danh hiá»‡n táº¡i
const attendanceTimestamp = new Date();

// 4. So sÃ¡nh
const isLate = attendanceTimestamp > matchStartDateTime;
```

### **VÃ­ Dá»¥**
```
Tráº­n Ä‘áº¥u:
- NgÃ y: 11/01/2026
- Giá» báº¯t Ä‘áº§u: 19:00

ThÃ nh viÃªn A quÃ©t QR lÃºc 18:55 â†’ âœ“ ÄÃºng giá» (isLate = false)
ThÃ nh viÃªn B quÃ©t QR lÃºc 19:05 â†’ â° Muá»™n (isLate = true)
ThÃ nh viÃªn C quÃ©t QR lÃºc 19:00 â†’ âœ“ ÄÃºng giá» (isLate = false)
```

---

## ğŸ¨ Giao Diá»‡n

### **1. Form Táº¡o/Sá»­a Tráº­n Äáº¥u**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThÃªm Tráº­n Äáº¥u                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loáº¡i Tráº­n Äáº¥u: [Äáº¥u táº­p â–¼]     â”‚
â”‚ NgÃ y: [11/01/2026]              â”‚
â”‚ Giá» Báº¯t Äáº§u: [19:00] â­ Má»šI    â”‚
â”‚ Äá»‘i Thá»§: [Äá»™i ABC]              â”‚
â”‚ Äá»‹a Äiá»ƒm: [SÃ¢n Thá»‘ng Nháº¥t]      â”‚
â”‚ Äiá»ƒm Danh: [â˜‘ Member A]         â”‚
â”‚            [â˜ Member B]         â”‚
â”‚            [â˜‘ Member C]         â”‚
â”‚                                 â”‚
â”‚           [LÆ°u]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **2. Danh SÃ¡ch Tráº­n Äáº¥u**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tráº­n Äáº¥u táº­p 11/01/2026                     â”‚
â”‚ ğŸ• 19:00 â­ Má»šI                             â”‚
â”‚ [Äáº¥u táº­p] Äá»™i ABC                           â”‚
â”‚ SÃ¢n Thá»‘ng Nháº¥t                              â”‚
â”‚                                             â”‚
â”‚ Äiá»ƒm danh:                                  â”‚
â”‚ âœ“ Member A                                  â”‚
â”‚   11/01, 18:55 âœ“ ÄÃºng giá» â­ Má»šI           â”‚
â”‚                                             â”‚
â”‚ âœ“ Member B                                  â”‚
â”‚   11/01, 19:05 â° Muá»™n â­ Má»šI              â”‚
â”‚                                             â”‚
â”‚ âœ— Member C                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **3. Káº¿t Quáº£ QuÃ©t QR**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âœ…                        â”‚
â”‚ Äiá»ƒm danh thÃ nh cÃ´ng!           â”‚
â”‚ (ÄÃºng giá») â­ Má»šI              â”‚
â”‚                                 â”‚
â”‚ Äá»™i ABC - 11/01/2026            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

hoáº·c

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âœ…                        â”‚
â”‚ Äiá»ƒm danh thÃ nh cÃ´ng!           â”‚
â”‚ (Äi muá»™n) â­ Má»šI               â”‚
â”‚                                 â”‚
â”‚ Äá»™i ABC - 11/01/2026            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ á»¨ng Dá»¥ng Thá»±c Táº¿

### **1. Quáº£n LÃ½ Ká»· Luáº­t**
- Theo dÃµi thÃ nh viÃªn thÆ°á»ng xuyÃªn Ä‘i muá»™n
- Ãp dá»¥ng chÃ­nh sÃ¡ch pháº¡t náº¿u cáº§n
- Táº¡o bÃ¡o cÃ¡o thá»‘ng kÃª Ä‘i muá»™n

### **2. Láº­p Káº¿ Hoáº¡ch**
- XÃ¡c Ä‘á»‹nh giá» báº¯t Ä‘áº§u phÃ¹ há»£p
- Äiá»u chá»‰nh lá»‹ch táº­p dá»±a trÃªn thÃ³i quen cá»§a Ä‘á»™i

### **3. Äá»™ng ViÃªn**
- Khen thÆ°á»Ÿng thÃ nh viÃªn luÃ´n Ä‘Ãºng giá»
- Táº¡o vÄƒn hÃ³a Ä‘Ãºng giá» trong Ä‘á»™i

---

## ğŸ”® TÃ­nh NÄƒng TÆ°Æ¡ng Lai (CÃ³ Thá»ƒ Má»Ÿ Rá»™ng)

### **1. Thá»‘ng KÃª Äi Muá»™n**
```javascript
// ThÃªm vÃ o Dashboard
const lateStats = computed(() => {
    let totalPresent = 0;
    let totalLate = 0;
    
    matches.value.forEach(match => {
        match.attendance.forEach(att => {
            if (att.status === 'present') {
                totalPresent++;
                if (att.isLate) totalLate++;
            }
        });
    });
    
    return {
        totalPresent,
        totalLate,
        lateRate: totalPresent > 0 
            ? Math.round((totalLate / totalPresent) * 100) 
            : 0
    };
});
```

### **2. BÃ¡o CÃ¡o CÃ¡ NhÃ¢n**
```javascript
// Thá»‘ng kÃª Ä‘i muá»™n cá»§a tá»«ng thÃ nh viÃªn
const getMemberLateStats = (memberId) => {
    let attended = 0;
    let late = 0;
    
    matches.value.forEach(match => {
        const att = match.attendance.find(a => a.memberId === memberId);
        if (att && att.status === 'present') {
            attended++;
            if (att.isLate) late++;
        }
    });
    
    return {
        attended,
        late,
        lateRate: attended > 0 ? Math.round((late / attended) * 100) : 0
    };
};
```

### **3. ThÃ´ng BÃ¡o Tá»± Äá»™ng**
- Nháº¯c nhá»Ÿ trÆ°á»›c giá» báº¯t Ä‘áº§u 30 phÃºt
- Cáº£nh bÃ¡o náº¿u thÃ nh viÃªn cÃ³ xu hÆ°á»›ng Ä‘i muá»™n

### **4. Pháº¡t Tá»± Äá»™ng**
- Tá»± Ä‘á»™ng tÃ­nh pháº¡t cho ngÆ°á»i Ä‘i muá»™n
- TÃ­ch há»£p vá»›i module Finance

---

## âš ï¸ LÆ°u Ã

### **1. MÃºi Giá»**
- Há»‡ thá»‘ng sá»­ dá»¥ng mÃºi giá» cá»§a thiáº¿t bá»‹
- Äáº£m báº£o thiáº¿t bá»‹ Ä‘áº·t Ä‘Ãºng mÃºi giá» Viá»‡t Nam (GMT+7)

### **2. Tráº­n Äáº¥u CÅ©**
- Tráº­n Ä‘áº¥u táº¡o trÆ°á»›c khi cÃ³ tÃ­nh nÄƒng nÃ y sáº½ khÃ´ng cÃ³ `startTime`
- KhÃ´ng tÃ­nh Ä‘i muá»™n/Ä‘Ãºng giá» cho cÃ¡c tráº­n nÃ y
- CÃ³ thá»ƒ sá»­a tráº­n cÅ© Ä‘á»ƒ thÃªm giá» báº¯t Ä‘áº§u

### **3. Dá»¯ Liá»‡u CÅ©**
- Attendance records cÅ© khÃ´ng cÃ³ `timestamp` vÃ  `isLate`
- Chá»‰ Ã¡p dá»¥ng cho Ä‘iá»ƒm danh má»›i sau khi cáº­p nháº­t

### **4. Äá»™ ChÃ­nh XÃ¡c**
- Phá»¥ thuá»™c vÃ o thá»i gian há»‡ thá»‘ng cá»§a thiáº¿t bá»‹
- NÃªn Ä‘á»“ng bá»™ thá»i gian thiáº¿t bá»‹ vá»›i internet

---

## ğŸ› Troubleshooting

### **Váº¥n Ä‘á»: KhÃ´ng hiá»ƒn thá»‹ tráº¡ng thÃ¡i Ä‘i muá»™n**
```
NguyÃªn nhÃ¢n:
- Tráº­n Ä‘áº¥u khÃ´ng cÃ³ giá» báº¯t Ä‘áº§u
- Äiá»ƒm danh trÆ°á»›c khi cáº­p nháº­t tÃ­nh nÄƒng

Giáº£i phÃ¡p:
- ThÃªm giá» báº¯t Ä‘áº§u cho tráº­n Ä‘áº¥u
- Chá»‰ Ã¡p dá»¥ng cho Ä‘iá»ƒm danh má»›i
```

### **Váº¥n Ä‘á»: Thá»i gian hiá»ƒn thá»‹ sai**
```
NguyÃªn nhÃ¢n:
- MÃºi giá» thiáº¿t bá»‹ khÃ´ng Ä‘Ãºng
- Thá»i gian há»‡ thá»‘ng khÃ´ng chÃ­nh xÃ¡c

Giáº£i phÃ¡p:
- Kiá»ƒm tra cÃ i Ä‘áº·t mÃºi giá»
- Äá»“ng bá»™ thá»i gian vá»›i internet
```

---

## ğŸ“ Changelog

### **Version 2.1 - 11/01/2026**
- âœ… ThÃªm trÆ°á»ng `startTime` cho Match
- âœ… LÆ°u `timestamp` khi Ä‘iá»ƒm danh
- âœ… TÃ­nh toÃ¡n `isLate` tá»± Ä‘á»™ng
- âœ… Hiá»ƒn thá»‹ tráº¡ng thÃ¡i Ä‘i muá»™n/Ä‘Ãºng giá» trong UI
- âœ… Cáº­p nháº­t form táº¡o/sá»­a tráº­n Ä‘áº¥u
- âœ… Cáº­p nháº­t mÃ n hÃ¬nh Ä‘iá»ƒm danh QR

---

**Cáº­p nháº­t:** 11/01/2026  
**PhiÃªn báº£n:** 2.1  
**TÃ¡c giáº£:** Antigravity AI
